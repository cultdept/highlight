<!-- HIGHLIGHT INTRO V2 - Page Settings > Custom Code > Head -->
<!-- VERSION: 2025-12-08 v18 - Phase 2 transition state with preset click reveal -->
<style>
/* ======================================================
   INTRO WRAPPER
   ====================================================== */
.intro-wrapper {
  position: relative;
  width: 100%;
  background: #faf9f7;
  overflow: visible; /* Don't clip any content */
}

/* Hide engine initially */
.engine-page {
  opacity: 0;
  visibility: hidden;
}

/* ======================================================
   PHASE 1: HERO
   ====================================================== */
.intro-hero {
  position: relative;
  width: 100%;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #faf9f7;
  overflow: visible; /* Don't clip content */
}

.intro-hero-content {
  text-align: center;
  padding: 0 40px;
  max-width: 900px;
}

.intro-headline {
  font-family: 'polymath-display', serif;
  font-size: clamp(48px, 9vw, 90px);
  font-weight: 700;
  color: #1a1a1a;
  line-height: 1.1;
  letter-spacing: -0.02em;
  opacity: 0; /* Start hidden, fade in via JS */
}

/* Line break for two-line layout */
.intro-headline .line-break {
  display: block;
  height: 0.1em;
}

/* Animated highlight - explicit positioning for intro */
.intro-headline .highlight {
  position: relative;
  z-index: 0;
}

.intro-headline .highlight::before {
  content: "";
  position: absolute;
  left: -4px;
  right: -4px;
  top: 20%;
  height: 55%;
  background: #fc3;
  z-index: -1;
  transform-origin: left;
  transform: scaleX(0);
}

.intro-headline .highlight.is-animated::before {
  animation: highlightFill 0.8s ease forwards;
}

@keyframes highlightFill {
  0% { transform: scaleX(0); }
  100% { transform: scaleX(1); }
}

/* Scroll indicator */
.intro-scroll-indicator {
  position: absolute;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0;
  color: #333;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.intro-scroll-indicator svg {
  width: 28px;
  height: 28px;
  stroke-width: 2;
}

/* ======================================================
   PHASE 2: WORDS SECTION (scrollable, parallax)
   ====================================================== */
.intro-words-section {
  position: relative;
  width: 100%;
  min-height: 200vh;
  background: #faf9f7;
  overflow: visible; /* Don't clip the words! */
  padding-top: 120px; /* More space from hero so top words don't get cut */
  padding-bottom: 100px;
}

.intro-criteria-word {
  position: absolute;
  font-family: 'polymath-display', serif;
  font-size: clamp(36px, 5vw, 60px);
  font-weight: 600;
  color: #1a1a1a;
  text-transform: lowercase;
  white-space: nowrap;
  opacity: 0;
  /* Ensure words don't get clipped */
  z-index: 5;
}

/* Highlight effect for criteria words - explicit positioning */
.intro-criteria-word .word-highlight {
  position: relative;
  z-index: 0;
}

.intro-criteria-word .word-highlight::before {
  content: "";
  position: absolute;
  left: -8px;
  right: -8px;
  top: 20%;
  height: 55%;
  background: #fc3;
  z-index: -1;
  transform-origin: left;
  transform: scaleX(0);
  transition: transform 0.5s ease;
}

.intro-criteria-word.is-highlighted .word-highlight::before {
  transform: scaleX(1);
}

/* Hide words when engine is pinned */
body.engine-pinned .intro-words-section {
  display: none;
}

/* ======================================================
   PHASE 3: CARD GRID
   ====================================================== */
.intro-grid-section {
  position: relative;
  width: 100%;
  min-height: 200vh;
  padding: 0 5%;
  background: #faf9f7;
}

.intro-grid-container {
  display: flex;
  gap: 24px;
  width: 100%;
  max-width: 1400px;
  margin: 0 auto;
  padding-top: 100px;
}

.intro-grid-column {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

/* Offset columns for staggered look */
.intro-grid-column.col-left {
  margin-top: 150px;
}

.intro-grid-column.col-center {
  margin-top: 0;
}

.intro-grid-column.col-right {
  margin-top: 200px;
}

.intro-grid-card {
  position: relative;
  border-radius: 24px;
  overflow: hidden;
  background: #e0e0e0;
}

.intro-grid-card img {
  width: 100%;
  aspect-ratio: 3 / 4;
  object-fit: cover;
  display: block;
}

/* ======================================================
   EXPANSION OVERLAY
   ====================================================== */
.intro-expansion-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: #faf9f7;
  opacity: 0;
  pointer-events: none;
  z-index: 9999;
}

/* ======================================================
   ENGINE REVEAL STATE
   ====================================================== */
body.engine-pinned {
  overflow: hidden;
}

body.engine-pinned .engine-page {
  opacity: 1;
  visibility: visible;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow-y: auto;
}

body.direct-engine .intro-wrapper {
  display: none;
}

body.direct-engine .engine-page {
  opacity: 1;
  visibility: visible;
}

/* ======================================================
   PHASE 2: TRANSITION STATE (centered question + presets)
   ====================================================== */
body.engine-transition .engine-page {
  opacity: 1;
  visibility: visible;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: #faf9f7;
  overflow: hidden;
}

/* Hide everything except question and presets during transition */
body.engine-transition .engine-header,
body.engine-transition .swiper,
body.engine-transition .engine-map-toggle,
body.engine-transition .engine-active-slide-description {
  opacity: 0 !important;
  pointer-events: none;
}

/* Override engine-main to be invisible/unstyled container */
body.engine-transition .engine-main {
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 0 40px !important;
  padding-bottom: 60px !important; /* Slight shift up for buttons */
  margin: 0 !important;
  width: 100% !important;
  max-width: none !important;
  background: transparent !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}

/* Question styled like intro hero */
body.engine-transition .engine-question {
  font-family: 'polymath-display', serif !important;
  font-size: clamp(48px, 9vw, 90px) !important;
  font-weight: 700 !important;
  color: #1a1a1a;
  line-height: 1.1 !important;
  letter-spacing: -0.02em;
  text-align: center;
  margin: 0 0 50px 0 !important;
  padding: 0;
  opacity: 0; /* Will fade in */
}

/* Presets centered below question */
body.engine-transition .engine-presets {
  opacity: 0; /* Will stagger in */
  padding: 0 !important;
  justify-content: center;
  background: transparent !important;
}

/* Highlight styles for "matters" and "you" */
.engine-question .highlight {
  position: relative;
  z-index: 0;
}

.engine-question .highlight::before {
  content: "";
  position: absolute;
  left: -6px;
  right: -6px;
  top: 20%;
  height: 55%;
  background: #fc3;
  z-index: -1;
  transform-origin: left;
  transform: scaleX(0);
}

.engine-question .highlight.is-animated::before {
  animation: highlightFill 0.6s ease forwards;
}

/* Pre-highlighted state (no animation, just show) */
.engine-question .highlight.is-animated.matters-highlight::before {
  animation: none !important;
  transform: scaleX(1) !important;
}

/* Initial states for reveal animation */
body.engine-transition .engine-header {
  transform: translateY(-100%);
}

body.engine-transition .swiper {
  transform: translateY(60px);
}

body.engine-transition .swiper-button-prev {
  transform: translateX(-100px);
  opacity: 0;
}

body.engine-transition .swiper-button-next {
  transform: translateX(100px);
  opacity: 0;
}

body.engine-transition .engine-map-toggle {
  transform: translateY(100px);
  opacity: 0;
}

/* After full reveal - reset to normal layout */
body.engine-revealed .engine-page {
  position: fixed;
  display: flex;
  flex-direction: column;
}

body.engine-revealed .engine-main {
  position: relative;
  top: auto;
  left: auto;
  transform: none;
  width: 100%;
  max-width: 1500px;
}

/* Ensure drawer stays fixed at bottom in all states */
/* Note: transform on parent can break position:fixed, so we use !important */
.engine-criteria-drawer {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
}

body.engine-transition .engine-criteria-drawer {
  opacity: 0 !important;
  pointer-events: none;
  transform: translateY(100%) !important;
}

body.engine-revealed .engine-criteria-drawer,
body.engine-pinned .engine-criteria-drawer {
  transform: none !important;
  max-height: 80px;
  overflow: visible !important;
}

body.engine-revealed .engine-criteria-drawer.is-open,
body.engine-pinned .engine-criteria-drawer.is-open {
  max-height: 500px !important; /* Large enough to fit all content */
}

/* No scrollbar - content fits naturally */
body.engine-revealed .engine-criteria-drawer .engine-criteria-boxes,
body.engine-pinned .engine-criteria-drawer .engine-criteria-boxes {
  overflow: visible !important;
  max-height: none !important;
}
</style>
